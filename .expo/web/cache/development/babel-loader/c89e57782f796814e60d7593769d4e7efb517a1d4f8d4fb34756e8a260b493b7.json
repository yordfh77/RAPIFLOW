{"ast":null,"code":"import _objectWithoutProperties from \"@babel/runtime/helpers/objectWithoutProperties\";\nimport _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nvar _excluded = [\"businessId\"];\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { collection, addDoc, updateDoc, deleteDoc, doc, getDocs, query, where, orderBy } from 'firebase/firestore';\nimport { db, auth } from \"../config/firebase\";\nvar PRODUCTS_COLLECTION = 'products';\nexport var productService = {\n  getBusinessProducts: function () {\n    var _getBusinessProducts = _asyncToGenerator(function* (businessId) {\n      try {\n        var q = query(collection(db, PRODUCTS_COLLECTION), where('businessId', '==', businessId), orderBy('name'));\n        var querySnapshot = yield getDocs(q);\n        var products = [];\n        querySnapshot.forEach(function (doc) {\n          products.push(_objectSpread({\n            id: doc.id\n          }, doc.data()));\n        });\n        return products;\n      } catch (error) {\n        console.error('Error getting products:', error);\n        throw error;\n      }\n    });\n    function getBusinessProducts(_x) {\n      return _getBusinessProducts.apply(this, arguments);\n    }\n    return getBusinessProducts;\n  }(),\n  addProduct: function () {\n    var _addProduct = _asyncToGenerator(function* (businessId, productData) {\n      try {\n        console.log('=== PRODUCT SERVICE: Agregando producto ===');\n        console.log('Datos del producto:', productData);\n        console.log('Usuario actual en Firebase:', auth.currentUser);\n        var _ = productData.businessId,\n          cleanProductData = _objectWithoutProperties(productData, _excluded);\n        var productToSave = _objectSpread(_objectSpread({}, cleanProductData), {}, {\n          businessId: businessId,\n          createdAt: new Date(),\n          updatedAt: new Date()\n        });\n        console.log('Guardando en Firestore:', productToSave);\n        var docRef = yield addDoc(collection(db, PRODUCTS_COLLECTION), productToSave);\n        console.log('Producto guardado exitosamente con ID:', docRef.id);\n        return docRef.id;\n      } catch (error) {\n        console.error('Error adding product:', error);\n        console.error('Error code:', error.code);\n        console.error('Error message:', error.message);\n        throw error;\n      }\n    });\n    function addProduct(_x2, _x3) {\n      return _addProduct.apply(this, arguments);\n    }\n    return addProduct;\n  }(),\n  updateProduct: function () {\n    var _updateProduct = _asyncToGenerator(function* (productId, productData) {\n      try {\n        var productRef = doc(db, PRODUCTS_COLLECTION, productId);\n        yield updateDoc(productRef, _objectSpread(_objectSpread({}, productData), {}, {\n          updatedAt: new Date()\n        }));\n      } catch (error) {\n        console.error('Error updating product:', error);\n        throw error;\n      }\n    });\n    function updateProduct(_x4, _x5) {\n      return _updateProduct.apply(this, arguments);\n    }\n    return updateProduct;\n  }(),\n  deleteProduct: function () {\n    var _deleteProduct = _asyncToGenerator(function* (productId) {\n      try {\n        yield deleteDoc(doc(db, PRODUCTS_COLLECTION, productId));\n      } catch (error) {\n        console.error('Error deleting product:', error);\n        throw error;\n      }\n    });\n    function deleteProduct(_x6) {\n      return _deleteProduct.apply(this, arguments);\n    }\n    return deleteProduct;\n  }(),\n  updateProductAvailability: function () {\n    var _updateProductAvailability = _asyncToGenerator(function* (productId, available) {\n      try {\n        var productRef = doc(db, PRODUCTS_COLLECTION, productId);\n        yield updateDoc(productRef, {\n          available: available,\n          updatedAt: new Date()\n        });\n      } catch (error) {\n        console.error('Error updating product availability:', error);\n        throw error;\n      }\n    });\n    function updateProductAvailability(_x7, _x8) {\n      return _updateProductAvailability.apply(this, arguments);\n    }\n    return updateProductAvailability;\n  }(),\n  getAvailableProducts: function () {\n    var _getAvailableProducts = _asyncToGenerator(function* () {\n      try {\n        var q = query(collection(db, PRODUCTS_COLLECTION), where('available', '==', true), orderBy('name'));\n        var querySnapshot = yield getDocs(q);\n        var products = [];\n        querySnapshot.forEach(function (doc) {\n          products.push(_objectSpread({\n            id: doc.id\n          }, doc.data()));\n        });\n        return products;\n      } catch (error) {\n        console.error('Error getting available products:', error);\n        throw error;\n      }\n    });\n    function getAvailableProducts() {\n      return _getAvailableProducts.apply(this, arguments);\n    }\n    return getAvailableProducts;\n  }()\n};\nexport default productService;","map":{"version":3,"names":["collection","addDoc","updateDoc","deleteDoc","doc","getDocs","query","where","orderBy","db","auth","PRODUCTS_COLLECTION","productService","getBusinessProducts","_getBusinessProducts","_asyncToGenerator","businessId","q","querySnapshot","products","forEach","push","_objectSpread","id","data","error","console","_x","apply","arguments","addProduct","_addProduct","productData","log","currentUser","_","cleanProductData","_objectWithoutProperties","_excluded","productToSave","createdAt","Date","updatedAt","docRef","code","message","_x2","_x3","updateProduct","_updateProduct","productId","productRef","_x4","_x5","deleteProduct","_deleteProduct","_x6","updateProductAvailability","_updateProductAvailability","available","_x7","_x8","getAvailableProducts","_getAvailableProducts"],"sources":["D:/HARBOR/RAPIFLOW/src/services/productService.js"],"sourcesContent":["import { \n  collection, \n  addDoc, \n  updateDoc, \n  deleteDoc, \n  doc, \n  getDocs, \n  query, \n  where, \n  orderBy \n} from 'firebase/firestore';\nimport { db, auth } from '../config/firebase';\n\nconst PRODUCTS_COLLECTION = 'products';\n\nexport const productService = {\n  // Obtener todos los productos de un negocio\n  async getBusinessProducts(businessId) {\n    try {\n      const q = query(\n        collection(db, PRODUCTS_COLLECTION),\n        where('businessId', '==', businessId),\n        orderBy('name')\n      );\n      const querySnapshot = await getDocs(q);\n      const products = [];\n      querySnapshot.forEach((doc) => {\n        products.push({ id: doc.id, ...doc.data() });\n      });\n      return products;\n    } catch (error) {\n      console.error('Error getting products:', error);\n      throw error;\n    }\n  },\n\n  // Agregar un nuevo producto\n  async addProduct(businessId, productData) {\n    try {\n      console.log('=== PRODUCT SERVICE: Agregando producto ===');\n      console.log('Datos del producto:', productData);\n      console.log('Usuario actual en Firebase:', auth.currentUser);\n      \n      // Crear una copia sin businessId duplicado\n      const { businessId: _, ...cleanProductData } = productData;\n      \n      const productToSave = {\n        ...cleanProductData,\n        businessId,\n        createdAt: new Date(),\n        updatedAt: new Date()\n      };\n      \n      console.log('Guardando en Firestore:', productToSave);\n      const docRef = await addDoc(collection(db, PRODUCTS_COLLECTION), productToSave);\n      console.log('Producto guardado exitosamente con ID:', docRef.id);\n      return docRef.id;\n    } catch (error) {\n      console.error('Error adding product:', error);\n      console.error('Error code:', error.code);\n      console.error('Error message:', error.message);\n      throw error;\n    }\n  },\n\n  // Actualizar un producto\n  async updateProduct(productId, productData) {\n    try {\n      const productRef = doc(db, PRODUCTS_COLLECTION, productId);\n      await updateDoc(productRef, {\n        ...productData,\n        updatedAt: new Date()\n      });\n    } catch (error) {\n      console.error('Error updating product:', error);\n      throw error;\n    }\n  },\n\n  // Eliminar un producto\n  async deleteProduct(productId) {\n    try {\n      await deleteDoc(doc(db, PRODUCTS_COLLECTION, productId));\n    } catch (error) {\n      console.error('Error deleting product:', error);\n      throw error;\n    }\n  },\n\n  // Actualizar disponibilidad de un producto\n  async updateProductAvailability(productId, available) {\n    try {\n      const productRef = doc(db, PRODUCTS_COLLECTION, productId);\n      await updateDoc(productRef, {\n        available,\n        updatedAt: new Date()\n      });\n    } catch (error) {\n      console.error('Error updating product availability:', error);\n      throw error;\n    }\n  },\n\n  // Obtener productos disponibles de todos los negocios (para clientes)\n  async getAvailableProducts() {\n    try {\n      const q = query(\n        collection(db, PRODUCTS_COLLECTION),\n        where('available', '==', true),\n        orderBy('name')\n      );\n      const querySnapshot = await getDocs(q);\n      const products = [];\n      querySnapshot.forEach((doc) => {\n        products.push({ id: doc.id, ...doc.data() });\n      });\n      return products;\n    } catch (error) {\n      console.error('Error getting available products:', error);\n      throw error;\n    }\n  }\n};\n\nexport default productService;"],"mappings":";;;;;;AAAA,SACEA,UAAU,EACVC,MAAM,EACNC,SAAS,EACTC,SAAS,EACTC,GAAG,EACHC,OAAO,EACPC,KAAK,EACLC,KAAK,EACLC,OAAO,QACF,oBAAoB;AAC3B,SAASC,EAAE,EAAEC,IAAI;AAEjB,IAAMC,mBAAmB,GAAG,UAAU;AAEtC,OAAO,IAAMC,cAAc,GAAG;EAEtBC,mBAAmB;IAAA,IAAAC,oBAAA,GAAAC,iBAAA,YAACC,UAAU,EAAE;MACpC,IAAI;QACF,IAAMC,CAAC,GAAGX,KAAK,CACbN,UAAU,CAACS,EAAE,EAAEE,mBAAmB,CAAC,EACnCJ,KAAK,CAAC,YAAY,EAAE,IAAI,EAAES,UAAU,CAAC,EACrCR,OAAO,CAAC,MAAM,CAChB,CAAC;QACD,IAAMU,aAAa,SAASb,OAAO,CAACY,CAAC,CAAC;QACtC,IAAME,QAAQ,GAAG,EAAE;QACnBD,aAAa,CAACE,OAAO,CAAC,UAAChB,GAAG,EAAK;UAC7Be,QAAQ,CAACE,IAAI,CAAAC,aAAA;YAAGC,EAAE,EAAEnB,GAAG,CAACmB;UAAE,GAAKnB,GAAG,CAACoB,IAAI,CAAC,CAAC,CAAE,CAAC;QAC9C,CAAC,CAAC;QACF,OAAOL,QAAQ;MACjB,CAAC,CAAC,OAAOM,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C,MAAMA,KAAK;MACb;IACF,CAAC;IAAA,SAjBKZ,mBAAmBA,CAAAc,EAAA;MAAA,OAAAb,oBAAA,CAAAc,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAnBhB,mBAAmB;EAAA;EAoBnBiB,UAAU;IAAA,IAAAC,WAAA,GAAAhB,iBAAA,YAACC,UAAU,EAAEgB,WAAW,EAAE;MACxC,IAAI;QACFN,OAAO,CAACO,GAAG,CAAC,6CAA6C,CAAC;QAC1DP,OAAO,CAACO,GAAG,CAAC,qBAAqB,EAAED,WAAW,CAAC;QAC/CN,OAAO,CAACO,GAAG,CAAC,6BAA6B,EAAEvB,IAAI,CAACwB,WAAW,CAAC;QAG5D,IAAoBC,CAAC,GAA0BH,WAAW,CAAlDhB,UAAU;UAAQoB,gBAAgB,GAAAC,wBAAA,CAAKL,WAAW,EAAAM,SAAA;QAE1D,IAAMC,aAAa,GAAAjB,aAAA,CAAAA,aAAA,KACdc,gBAAgB;UACnBpB,UAAU,EAAVA,UAAU;UACVwB,SAAS,EAAE,IAAIC,IAAI,CAAC,CAAC;UACrBC,SAAS,EAAE,IAAID,IAAI,CAAC;QAAC,EACtB;QAEDf,OAAO,CAACO,GAAG,CAAC,yBAAyB,EAAEM,aAAa,CAAC;QACrD,IAAMI,MAAM,SAAS1C,MAAM,CAACD,UAAU,CAACS,EAAE,EAAEE,mBAAmB,CAAC,EAAE4B,aAAa,CAAC;QAC/Eb,OAAO,CAACO,GAAG,CAAC,wCAAwC,EAAEU,MAAM,CAACpB,EAAE,CAAC;QAChE,OAAOoB,MAAM,CAACpB,EAAE;MAClB,CAAC,CAAC,OAAOE,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;QAC7CC,OAAO,CAACD,KAAK,CAAC,aAAa,EAAEA,KAAK,CAACmB,IAAI,CAAC;QACxClB,OAAO,CAACD,KAAK,CAAC,gBAAgB,EAAEA,KAAK,CAACoB,OAAO,CAAC;QAC9C,MAAMpB,KAAK;MACb;IACF,CAAC;IAAA,SA1BKK,UAAUA,CAAAgB,GAAA,EAAAC,GAAA;MAAA,OAAAhB,WAAA,CAAAH,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAVC,UAAU;EAAA;EA6BVkB,aAAa;IAAA,IAAAC,cAAA,GAAAlC,iBAAA,YAACmC,SAAS,EAAElB,WAAW,EAAE;MAC1C,IAAI;QACF,IAAMmB,UAAU,GAAG/C,GAAG,CAACK,EAAE,EAAEE,mBAAmB,EAAEuC,SAAS,CAAC;QAC1D,MAAMhD,SAAS,CAACiD,UAAU,EAAA7B,aAAA,CAAAA,aAAA,KACrBU,WAAW;UACdU,SAAS,EAAE,IAAID,IAAI,CAAC;QAAC,EACtB,CAAC;MACJ,CAAC,CAAC,OAAOhB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C,MAAMA,KAAK;MACb;IACF,CAAC;IAAA,SAXKuB,aAAaA,CAAAI,GAAA,EAAAC,GAAA;MAAA,OAAAJ,cAAA,CAAArB,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAbmB,aAAa;EAAA;EAcbM,aAAa;IAAA,IAAAC,cAAA,GAAAxC,iBAAA,YAACmC,SAAS,EAAE;MAC7B,IAAI;QACF,MAAM/C,SAAS,CAACC,GAAG,CAACK,EAAE,EAAEE,mBAAmB,EAAEuC,SAAS,CAAC,CAAC;MAC1D,CAAC,CAAC,OAAOzB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;QAC/C,MAAMA,KAAK;MACb;IACF,CAAC;IAAA,SAPK6B,aAAaA,CAAAE,GAAA;MAAA,OAAAD,cAAA,CAAA3B,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAbyB,aAAa;EAAA;EAUbG,yBAAyB;IAAA,IAAAC,0BAAA,GAAA3C,iBAAA,YAACmC,SAAS,EAAES,SAAS,EAAE;MACpD,IAAI;QACF,IAAMR,UAAU,GAAG/C,GAAG,CAACK,EAAE,EAAEE,mBAAmB,EAAEuC,SAAS,CAAC;QAC1D,MAAMhD,SAAS,CAACiD,UAAU,EAAE;UAC1BQ,SAAS,EAATA,SAAS;UACTjB,SAAS,EAAE,IAAID,IAAI,CAAC;QACtB,CAAC,CAAC;MACJ,CAAC,CAAC,OAAOhB,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,sCAAsC,EAAEA,KAAK,CAAC;QAC5D,MAAMA,KAAK;MACb;IACF,CAAC;IAAA,SAXKgC,yBAAyBA,CAAAG,GAAA,EAAAC,GAAA;MAAA,OAAAH,0BAAA,CAAA9B,KAAA,OAAAC,SAAA;IAAA;IAAA,OAAzB4B,yBAAyB;EAAA;EAczBK,oBAAoB;IAAA,IAAAC,qBAAA,GAAAhD,iBAAA,cAAG;MAC3B,IAAI;QACF,IAAME,CAAC,GAAGX,KAAK,CACbN,UAAU,CAACS,EAAE,EAAEE,mBAAmB,CAAC,EACnCJ,KAAK,CAAC,WAAW,EAAE,IAAI,EAAE,IAAI,CAAC,EAC9BC,OAAO,CAAC,MAAM,CAChB,CAAC;QACD,IAAMU,aAAa,SAASb,OAAO,CAACY,CAAC,CAAC;QACtC,IAAME,QAAQ,GAAG,EAAE;QACnBD,aAAa,CAACE,OAAO,CAAC,UAAChB,GAAG,EAAK;UAC7Be,QAAQ,CAACE,IAAI,CAAAC,aAAA;YAAGC,EAAE,EAAEnB,GAAG,CAACmB;UAAE,GAAKnB,GAAG,CAACoB,IAAI,CAAC,CAAC,CAAE,CAAC;QAC9C,CAAC,CAAC;QACF,OAAOL,QAAQ;MACjB,CAAC,CAAC,OAAOM,KAAK,EAAE;QACdC,OAAO,CAACD,KAAK,CAAC,mCAAmC,EAAEA,KAAK,CAAC;QACzD,MAAMA,KAAK;MACb;IACF,CAAC;IAAA,SAjBKqC,oBAAoBA,CAAA;MAAA,OAAAC,qBAAA,CAAAnC,KAAA,OAAAC,SAAA;IAAA;IAAA,OAApBiC,oBAAoB;EAAA;AAkB5B,CAAC;AAED,eAAelD,cAAc","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}