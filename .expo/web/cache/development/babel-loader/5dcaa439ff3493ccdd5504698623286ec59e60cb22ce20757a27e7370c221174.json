{"ast":null,"code":"import _defineProperty from \"@babel/runtime/helpers/defineProperty\";\nimport _asyncToGenerator from \"@babel/runtime/helpers/asyncToGenerator\";\nfunction ownKeys(e, r) { var t = Object.keys(e); if (Object.getOwnPropertySymbols) { var o = Object.getOwnPropertySymbols(e); r && (o = o.filter(function (r) { return Object.getOwnPropertyDescriptor(e, r).enumerable; })), t.push.apply(t, o); } return t; }\nfunction _objectSpread(e) { for (var r = 1; r < arguments.length; r++) { var t = null != arguments[r] ? arguments[r] : {}; r % 2 ? ownKeys(Object(t), !0).forEach(function (r) { _defineProperty(e, r, t[r]); }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) { Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r)); }); } return e; }\nimport { signInWithEmailAndPassword, createUserWithEmailAndPassword, signOut, onAuthStateChanged, updateProfile, GoogleAuthProvider, signInWithCredential } from 'firebase/auth';\nimport { doc, setDoc, getDoc, updateDoc } from 'firebase/firestore';\nimport { auth, db } from \"../config/firebase\";\nimport * as AuthSession from 'expo-auth-session';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Crypto from 'expo-crypto';\nimport { GOOGLE_CONFIG, validateGoogleConfig } from \"../config/googleConfig\";\nexport var USER_TYPES = {\n  CLIENT: 'cliente',\n  BUSINESS: 'negocio',\n  DRIVER: 'repartidor'\n};\nexport var registerUser = function () {\n  var _ref = _asyncToGenerator(function* (userData) {\n    try {\n      console.log('=== AUTHSERVICE: Iniciando registro ===');\n      console.log('Datos recibidos:', userData);\n      var email = userData.email,\n        password = userData.password,\n        name = userData.name,\n        phone = userData.phone,\n        address = userData.address,\n        userType = userData.userType,\n        businessName = userData.businessName,\n        businessType = userData.businessType,\n        vehicleType = userData.vehicleType,\n        licenseNumber = userData.licenseNumber;\n      console.log('Creando usuario en Firebase Auth...');\n      var userCredential = yield createUserWithEmailAndPassword(auth, email, password);\n      var user = userCredential.user;\n      console.log('Usuario creado en Auth:', user.uid);\n      console.log('Actualizando perfil del usuario...');\n      yield updateProfile(user, {\n        displayName: name\n      });\n      console.log('Preparando datos para Firestore...');\n      var userDocData = {\n        uid: user.uid,\n        name: name,\n        email: email,\n        phone: phone,\n        address: address,\n        userType: userType,\n        createdAt: new Date().toISOString(),\n        isActive: true,\n        profileComplete: true\n      };\n      if (userType === USER_TYPES.BUSINESS) {\n        userDocData.businessName = businessName;\n        userDocData.businessType = businessType;\n        userDocData.businessInfo = {\n          isOpen: false,\n          rating: 0,\n          totalOrders: 0,\n          totalRevenue: 0,\n          categories: [],\n          description: '',\n          deliveryFee: 0,\n          minOrderValue: 0\n        };\n      } else if (userType === USER_TYPES.DRIVER) {\n        userDocData.vehicleType = vehicleType;\n        userDocData.licenseNumber = licenseNumber;\n        userDocData.driverInfo = {\n          isOnline: false,\n          rating: 0,\n          totalDeliveries: 0,\n          totalEarnings: 0,\n          isVerified: false\n        };\n      } else if (userType === USER_TYPES.CLIENT) {\n        userDocData.clientInfo = {\n          totalOrders: 0,\n          totalSpent: 0,\n          favoriteRestaurants: [],\n          addresses: [address],\n          paymentMethods: []\n        };\n      }\n      console.log('Guardando documento en Firestore...');\n      console.log('Datos del documento:', userDocData);\n      yield setDoc(doc(db, 'users', user.uid), userDocData);\n      console.log('Documento guardado exitosamente en Firestore');\n      var successResult = {\n        success: true,\n        user: {\n          uid: user.uid,\n          email: user.email,\n          name: name,\n          userType: userType\n        }\n      };\n      console.log('=== AUTHSERVICE: Registro completado exitosamente ===');\n      console.log('Resultado:', successResult);\n      return successResult;\n    } catch (error) {\n      console.error('=== AUTHSERVICE: Error en el registro ===');\n      console.error('Error completo:', error);\n      console.error('Código de error:', error.code);\n      console.error('Mensaje de error:', error.message);\n      var errorResult = {\n        success: false,\n        error: getErrorMessage(error.code)\n      };\n      console.log('Resultado de error:', errorResult);\n      return errorResult;\n    }\n  });\n  return function registerUser(_x) {\n    return _ref.apply(this, arguments);\n  };\n}();\nexport var loginUser = function () {\n  var _ref2 = _asyncToGenerator(function* (email, password) {\n    try {\n      var userCredential = yield signInWithEmailAndPassword(auth, email, password);\n      var user = userCredential.user;\n      var userDoc = yield getDoc(doc(db, 'users', user.uid));\n      if (userDoc.exists()) {\n        var userData = userDoc.data();\n        return {\n          success: true,\n          user: _objectSpread({\n            uid: user.uid,\n            email: user.email,\n            name: userData.name,\n            userType: userData.userType\n          }, userData)\n        };\n      } else {\n        return {\n          success: false,\n          error: 'No se encontraron datos del usuario'\n        };\n      }\n    } catch (error) {\n      console.error('Error logging in:', error);\n      return {\n        success: false,\n        error: getErrorMessage(error.code)\n      };\n    }\n  });\n  return function loginUser(_x2, _x3) {\n    return _ref2.apply(this, arguments);\n  };\n}();\nWebBrowser.maybeCompleteAuthSession();\nexport var signInWithGoogle = function () {\n  var _ref3 = _asyncToGenerator(function* () {\n    try {\n      if (!validateGoogleConfig()) {\n        return {\n          success: false,\n          error: 'Configuración de Google no válida. Revisa googleConfig.js'\n        };\n      }\n      var redirectUri = AuthSession.makeRedirectUri({\n        useProxy: true\n      });\n      var request = new AuthSession.AuthRequest({\n        clientId: GOOGLE_CONFIG.WEB_CLIENT_ID,\n        scopes: GOOGLE_CONFIG.SCOPES,\n        responseType: AuthSession.ResponseType.Code,\n        redirectUri: redirectUri,\n        additionalParameters: {},\n        extraParams: {\n          access_type: 'offline'\n        }\n      });\n      var result = yield request.promptAsync({\n        authorizationEndpoint: GOOGLE_CONFIG.AUTH_ENDPOINT\n      });\n      if (result.type === 'success') {\n        var tokenResult = yield AuthSession.exchangeCodeAsync({\n          clientId: GOOGLE_CONFIG.WEB_CLIENT_ID,\n          code: result.params.code,\n          redirectUri: redirectUri,\n          extraParams: {\n            code_verifier: request.codeChallenge\n          }\n        }, {\n          tokenEndpoint: GOOGLE_CONFIG.TOKEN_ENDPOINT\n        });\n        var credential = GoogleAuthProvider.credential(tokenResult.idToken, tokenResult.accessToken);\n        var userCredential = yield signInWithCredential(auth, credential);\n        var user = userCredential.user;\n        var userDoc = yield getDoc(doc(db, 'users', user.uid));\n        if (userDoc.exists()) {\n          var userData = userDoc.data();\n          return {\n            success: true,\n            user: _objectSpread({\n              uid: user.uid,\n              email: user.email,\n              name: userData.name,\n              userType: userData.userType\n            }, userData)\n          };\n        } else {\n          return {\n            success: true,\n            isNewUser: true,\n            user: {\n              uid: user.uid,\n              email: user.email,\n              name: user.displayName,\n              photoURL: user.photoURL\n            }\n          };\n        }\n      } else {\n        return {\n          success: false,\n          error: 'Autenticación cancelada'\n        };\n      }\n    } catch (error) {\n      console.error('Error with Google Sign-In:', error);\n      return {\n        success: false,\n        error: 'Error al iniciar sesión con Google'\n      };\n    }\n  });\n  return function signInWithGoogle() {\n    return _ref3.apply(this, arguments);\n  };\n}();\nexport var completeGoogleUserRegistration = function () {\n  var _ref4 = _asyncToGenerator(function* (userData, userType) {\n    try {\n      var userDocData = {\n        name: userData.name,\n        email: userData.email,\n        userType: userType,\n        photoURL: userData.photoURL || null,\n        createdAt: new Date().toISOString(),\n        updatedAt: new Date().toISOString(),\n        isActive: true\n      };\n      if (userType === USER_TYPES.BUSINESS) {\n        userDocData.businessName = '';\n        userDocData.businessType = '';\n        userDocData.address = '';\n        userDocData.phone = '';\n        userDocData.description = '';\n        userDocData.isVerified = false;\n      } else if (userType === USER_TYPES.DRIVER) {\n        userDocData.vehicleType = '';\n        userDocData.licensePlate = '';\n        userDocData.phone = '';\n        userDocData.isVerified = false;\n        userDocData.isAvailable = false;\n      } else {\n        userDocData.phone = '';\n        userDocData.address = '';\n      }\n      yield setDoc(doc(db, 'users', userData.uid), userDocData);\n      return {\n        success: true,\n        user: _objectSpread({\n          uid: userData.uid,\n          email: userData.email,\n          name: userData.name,\n          userType: userType\n        }, userDocData)\n      };\n    } catch (error) {\n      console.error('Error completing Google user registration:', error);\n      return {\n        success: false,\n        error: 'Error al completar el registro'\n      };\n    }\n  });\n  return function completeGoogleUserRegistration(_x4, _x5) {\n    return _ref4.apply(this, arguments);\n  };\n}();\nexport var logoutUser = function () {\n  var _ref5 = _asyncToGenerator(function* () {\n    try {\n      yield signOut(auth);\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('Error logging out:', error);\n      return {\n        success: false,\n        error: getErrorMessage(error.code)\n      };\n    }\n  });\n  return function logoutUser() {\n    return _ref5.apply(this, arguments);\n  };\n}();\nexport var getCurrentUser = function getCurrentUser() {\n  return auth.currentUser;\n};\nexport var onAuthStateChange = function onAuthStateChange(callback) {\n  return onAuthStateChanged(auth, function () {\n    var _ref6 = _asyncToGenerator(function* (user) {\n      if (user) {\n        try {\n          var userDoc = yield getDoc(doc(db, 'users', user.uid));\n          if (userDoc.exists()) {\n            var userData = userDoc.data();\n            callback(_objectSpread({\n              uid: user.uid,\n              email: user.email,\n              name: userData.name,\n              userType: userData.userType\n            }, userData));\n          } else {\n            callback(null);\n          }\n        } catch (error) {\n          console.error('Error getting user data:', error);\n          callback(null);\n        }\n      } else {\n        callback(null);\n      }\n    });\n    return function (_x6) {\n      return _ref6.apply(this, arguments);\n    };\n  }());\n};\nexport var updateUserProfile = function () {\n  var _ref7 = _asyncToGenerator(function* (userId, updateData) {\n    try {\n      var userRef = doc(db, 'users', userId);\n      yield updateDoc(userRef, _objectSpread(_objectSpread({}, updateData), {}, {\n        updatedAt: new Date().toISOString()\n      }));\n      if (updateData.name && auth.currentUser) {\n        yield updateProfile(auth.currentUser, {\n          displayName: updateData.name\n        });\n      }\n      return {\n        success: true\n      };\n    } catch (error) {\n      console.error('Error updating profile:', error);\n      return {\n        success: false,\n        error: getErrorMessage(error.code)\n      };\n    }\n  });\n  return function updateUserProfile(_x7, _x8) {\n    return _ref7.apply(this, arguments);\n  };\n}();\nexport var getUserData = function () {\n  var _ref8 = _asyncToGenerator(function* (userId) {\n    try {\n      var userDoc = yield getDoc(doc(db, 'users', userId));\n      if (userDoc.exists()) {\n        return {\n          success: true,\n          userData: userDoc.data()\n        };\n      } else {\n        return {\n          success: false,\n          error: 'Usuario no encontrado'\n        };\n      }\n    } catch (error) {\n      console.error('Error getting user data:', error);\n      return {\n        success: false,\n        error: getErrorMessage(error.code)\n      };\n    }\n  });\n  return function getUserData(_x9) {\n    return _ref8.apply(this, arguments);\n  };\n}();\nvar getErrorMessage = function getErrorMessage(errorCode) {\n  var errorMessages = {\n    'auth/user-not-found': 'No se encontró una cuenta con este correo electrónico',\n    'auth/wrong-password': 'Contraseña incorrecta',\n    'auth/email-already-in-use': 'Ya existe una cuenta con este correo electrónico',\n    'auth/weak-password': 'La contraseña debe tener al menos 6 caracteres',\n    'auth/invalid-email': 'Correo electrónico inválido',\n    'auth/user-disabled': 'Esta cuenta ha sido deshabilitada',\n    'auth/too-many-requests': 'Demasiados intentos fallidos. Intenta más tarde',\n    'auth/network-request-failed': 'Error de conexión. Verifica tu internet',\n    'auth/invalid-credential': 'Credenciales inválidas'\n  };\n  return errorMessages[errorCode] || 'Ha ocurrido un error inesperado';\n};\nexport var validateEmail = function validateEmail(email) {\n  var emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n};\nexport var validatePassword = function validatePassword(password) {\n  return password.length >= 6;\n};\nexport var validateCubanPhone = function validateCubanPhone(phone) {\n  var cubanPhoneRegex = /^(\\+53)?[5-8]\\d{7}$/;\n  return cubanPhoneRegex.test(phone.replace(/\\s/g, ''));\n};","map":{"version":3,"names":["signInWithEmailAndPassword","createUserWithEmailAndPassword","signOut","onAuthStateChanged","updateProfile","GoogleAuthProvider","signInWithCredential","doc","setDoc","getDoc","updateDoc","auth","db","AuthSession","WebBrowser","Crypto","GOOGLE_CONFIG","validateGoogleConfig","USER_TYPES","CLIENT","BUSINESS","DRIVER","registerUser","_ref","_asyncToGenerator","userData","console","log","email","password","name","phone","address","userType","businessName","businessType","vehicleType","licenseNumber","userCredential","user","uid","displayName","userDocData","createdAt","Date","toISOString","isActive","profileComplete","businessInfo","isOpen","rating","totalOrders","totalRevenue","categories","description","deliveryFee","minOrderValue","driverInfo","isOnline","totalDeliveries","totalEarnings","isVerified","clientInfo","totalSpent","favoriteRestaurants","addresses","paymentMethods","successResult","success","error","code","message","errorResult","getErrorMessage","_x","apply","arguments","loginUser","_ref2","userDoc","exists","data","_objectSpread","_x2","_x3","maybeCompleteAuthSession","signInWithGoogle","_ref3","redirectUri","makeRedirectUri","useProxy","request","AuthRequest","clientId","WEB_CLIENT_ID","scopes","SCOPES","responseType","ResponseType","Code","additionalParameters","extraParams","access_type","result","promptAsync","authorizationEndpoint","AUTH_ENDPOINT","type","tokenResult","exchangeCodeAsync","params","code_verifier","codeChallenge","tokenEndpoint","TOKEN_ENDPOINT","credential","idToken","accessToken","isNewUser","photoURL","completeGoogleUserRegistration","_ref4","updatedAt","licensePlate","isAvailable","_x4","_x5","logoutUser","_ref5","getCurrentUser","currentUser","onAuthStateChange","callback","_ref6","_x6","updateUserProfile","_ref7","userId","updateData","userRef","_x7","_x8","getUserData","_ref8","_x9","errorCode","errorMessages","validateEmail","emailRegex","test","validatePassword","length","validateCubanPhone","cubanPhoneRegex","replace"],"sources":["D:/HARBOR/RAPIFLOW/src/services/authService.js"],"sourcesContent":["import { \n  signInWithEmailAndPassword, \n  createUserWithEmailAndPassword, \n  signOut, \n  onAuthStateChanged,\n  updateProfile,\n  GoogleAuthProvider,\n  signInWithCredential\n} from 'firebase/auth';\nimport { \n  doc, \n  setDoc, \n  getDoc, \n  updateDoc \n} from 'firebase/firestore';\nimport { auth, db } from '../config/firebase';\nimport * as AuthSession from 'expo-auth-session';\nimport * as WebBrowser from 'expo-web-browser';\nimport * as Crypto from 'expo-crypto';\nimport { GOOGLE_CONFIG, validateGoogleConfig } from '../config/googleConfig';\n\n// Tipos de usuario disponibles\nexport const USER_TYPES = {\n  CLIENT: 'cliente',\n  BUSINESS: 'negocio', \n  DRIVER: 'repartidor'\n};\n\n// Función para registrar un nuevo usuario\nexport const registerUser = async (userData) => {\n  try {\n    console.log('=== AUTHSERVICE: Iniciando registro ===');\n    console.log('Datos recibidos:', userData);\n    \n    const { email, password, name, phone, address, userType, businessName, businessType, vehicleType, licenseNumber } = userData;\n    \n    console.log('Creando usuario en Firebase Auth...');\n    // Crear usuario en Firebase Auth\n    const userCredential = await createUserWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n    console.log('Usuario creado en Auth:', user.uid);\n    \n    console.log('Actualizando perfil del usuario...');\n    // Actualizar el perfil con el nombre\n    await updateProfile(user, {\n      displayName: name\n    });\n    \n    console.log('Preparando datos para Firestore...');\n    // Crear documento del usuario en Firestore\n    const userDocData = {\n      uid: user.uid,\n      name,\n      email,\n      phone,\n      address,\n      userType,\n      createdAt: new Date().toISOString(),\n      isActive: true,\n      profileComplete: true\n    };\n    \n    // Agregar campos específicos según el tipo de usuario\n    if (userType === USER_TYPES.BUSINESS) {\n      userDocData.businessName = businessName;\n      userDocData.businessType = businessType;\n      userDocData.businessInfo = {\n        isOpen: false,\n        rating: 0,\n        totalOrders: 0,\n        totalRevenue: 0,\n        categories: [],\n        description: '',\n        deliveryFee: 0,\n        minOrderValue: 0\n      };\n    } else if (userType === USER_TYPES.DRIVER) {\n      userDocData.vehicleType = vehicleType;\n      userDocData.licenseNumber = licenseNumber;\n      userDocData.driverInfo = {\n        isOnline: false,\n        rating: 0,\n        totalDeliveries: 0,\n        totalEarnings: 0,\n        isVerified: false\n      };\n    } else if (userType === USER_TYPES.CLIENT) {\n      userDocData.clientInfo = {\n        totalOrders: 0,\n        totalSpent: 0,\n        favoriteRestaurants: [],\n        addresses: [address],\n        paymentMethods: []\n      };\n    }\n    \n    console.log('Guardando documento en Firestore...');\n    console.log('Datos del documento:', userDocData);\n    await setDoc(doc(db, 'users', user.uid), userDocData);\n    console.log('Documento guardado exitosamente en Firestore');\n    \n    const successResult = {\n      success: true,\n      user: {\n        uid: user.uid,\n        email: user.email,\n        name,\n        userType\n      }\n    };\n    console.log('=== AUTHSERVICE: Registro completado exitosamente ===');\n    console.log('Resultado:', successResult);\n    return successResult;\n  } catch (error) {\n    console.error('=== AUTHSERVICE: Error en el registro ===');\n    console.error('Error completo:', error);\n    console.error('Código de error:', error.code);\n    console.error('Mensaje de error:', error.message);\n    const errorResult = {\n      success: false,\n      error: getErrorMessage(error.code)\n    };\n    console.log('Resultado de error:', errorResult);\n    return errorResult;\n  }\n};\n\n// Función para iniciar sesión\nexport const loginUser = async (email, password) => {\n  try {\n    const userCredential = await signInWithEmailAndPassword(auth, email, password);\n    const user = userCredential.user;\n    \n    // Obtener datos adicionales del usuario desde Firestore\n    const userDoc = await getDoc(doc(db, 'users', user.uid));\n    \n    if (userDoc.exists()) {\n      const userData = userDoc.data();\n      return {\n        success: true,\n        user: {\n          uid: user.uid,\n          email: user.email,\n          name: userData.name,\n          userType: userData.userType,\n          ...userData\n        }\n      };\n    } else {\n      return {\n        success: false,\n        error: 'No se encontraron datos del usuario'\n      };\n    }\n  } catch (error) {\n    console.error('Error logging in:', error);\n    return {\n      success: false,\n      error: getErrorMessage(error.code)\n    };\n  }\n};\n\n// Configurar WebBrowser para Google Sign-In\nWebBrowser.maybeCompleteAuthSession();\n\n// Función para iniciar sesión con Google\nexport const signInWithGoogle = async () => {\n  try {\n    // Validar configuración de Google\n    if (!validateGoogleConfig()) {\n      return {\n        success: false,\n        error: 'Configuración de Google no válida. Revisa googleConfig.js'\n      };\n    }\n    \n    const redirectUri = AuthSession.makeRedirectUri({ useProxy: true });\n    \n    // Crear request de autenticación\n    const request = new AuthSession.AuthRequest({\n      clientId: GOOGLE_CONFIG.WEB_CLIENT_ID,\n      scopes: GOOGLE_CONFIG.SCOPES,\n      responseType: AuthSession.ResponseType.Code,\n      redirectUri,\n      additionalParameters: {},\n      extraParams: {\n        access_type: 'offline',\n      },\n    });\n\n    // Realizar la autenticación\n    const result = await request.promptAsync({\n      authorizationEndpoint: GOOGLE_CONFIG.AUTH_ENDPOINT,\n    });\n\n    if (result.type === 'success') {\n      // Intercambiar código por token\n      const tokenResult = await AuthSession.exchangeCodeAsync(\n        {\n          clientId: GOOGLE_CONFIG.WEB_CLIENT_ID,\n          code: result.params.code,\n          redirectUri,\n          extraParams: {\n            code_verifier: request.codeChallenge,\n          },\n        },\n        {\n          tokenEndpoint: GOOGLE_CONFIG.TOKEN_ENDPOINT,\n        }\n      );\n\n      // Crear credencial de Google para Firebase\n      const credential = GoogleAuthProvider.credential(\n        tokenResult.idToken,\n        tokenResult.accessToken\n      );\n\n      // Iniciar sesión en Firebase\n      const userCredential = await signInWithCredential(auth, credential);\n      const user = userCredential.user;\n\n      // Verificar si el usuario ya existe en Firestore\n      const userDoc = await getDoc(doc(db, 'users', user.uid));\n      \n      if (userDoc.exists()) {\n        // Usuario existente\n        const userData = userDoc.data();\n        return {\n          success: true,\n          user: {\n            uid: user.uid,\n            email: user.email,\n            name: userData.name,\n            userType: userData.userType,\n            ...userData\n          }\n        };\n      } else {\n        // Nuevo usuario - necesita completar registro\n        return {\n          success: true,\n          isNewUser: true,\n          user: {\n            uid: user.uid,\n            email: user.email,\n            name: user.displayName,\n            photoURL: user.photoURL\n          }\n        };\n      }\n    } else {\n      return {\n        success: false,\n        error: 'Autenticación cancelada'\n      };\n    }\n  } catch (error) {\n    console.error('Error with Google Sign-In:', error);\n    return {\n      success: false,\n      error: 'Error al iniciar sesión con Google'\n    };\n  }\n};\n\n// Función para completar el registro de usuario de Google\nexport const completeGoogleUserRegistration = async (userData, userType) => {\n  try {\n    const userDocData = {\n      name: userData.name,\n      email: userData.email,\n      userType,\n      photoURL: userData.photoURL || null,\n      createdAt: new Date().toISOString(),\n      updatedAt: new Date().toISOString(),\n      isActive: true\n    };\n\n    // Agregar campos específicos según el tipo de usuario\n    if (userType === USER_TYPES.BUSINESS) {\n      userDocData.businessName = '';\n      userDocData.businessType = '';\n      userDocData.address = '';\n      userDocData.phone = '';\n      userDocData.description = '';\n      userDocData.isVerified = false;\n    } else if (userType === USER_TYPES.DRIVER) {\n      userDocData.vehicleType = '';\n      userDocData.licensePlate = '';\n      userDocData.phone = '';\n      userDocData.isVerified = false;\n      userDocData.isAvailable = false;\n    } else {\n      // Cliente\n      userDocData.phone = '';\n      userDocData.address = '';\n    }\n\n    await setDoc(doc(db, 'users', userData.uid), userDocData);\n    \n    return {\n      success: true,\n      user: {\n        uid: userData.uid,\n        email: userData.email,\n        name: userData.name,\n        userType,\n        ...userDocData\n      }\n    };\n  } catch (error) {\n    console.error('Error completing Google user registration:', error);\n    return {\n      success: false,\n      error: 'Error al completar el registro'\n    };\n  }\n};\n\n// Función para cerrar sesión\nexport const logoutUser = async () => {\n  try {\n    await signOut(auth);\n    return { success: true };\n  } catch (error) {\n    console.error('Error logging out:', error);\n    return {\n      success: false,\n      error: getErrorMessage(error.code)\n    };\n  }\n};\n\n// Función para obtener el usuario actual\nexport const getCurrentUser = () => {\n  return auth.currentUser;\n};\n\n// Función para escuchar cambios en el estado de autenticación\nexport const onAuthStateChange = (callback) => {\n  return onAuthStateChanged(auth, async (user) => {\n    if (user) {\n      // Usuario autenticado, obtener datos adicionales\n      try {\n        const userDoc = await getDoc(doc(db, 'users', user.uid));\n        if (userDoc.exists()) {\n          const userData = userDoc.data();\n          callback({\n            uid: user.uid,\n            email: user.email,\n            name: userData.name,\n            userType: userData.userType,\n            ...userData\n          });\n        } else {\n          callback(null);\n        }\n      } catch (error) {\n        console.error('Error getting user data:', error);\n        callback(null);\n      }\n    } else {\n      // Usuario no autenticado\n      callback(null);\n    }\n  });\n};\n\n// Función para actualizar el perfil del usuario\nexport const updateUserProfile = async (userId, updateData) => {\n  try {\n    const userRef = doc(db, 'users', userId);\n    await updateDoc(userRef, {\n      ...updateData,\n      updatedAt: new Date().toISOString()\n    });\n    \n    // Si se actualiza el nombre, también actualizar en Auth\n    if (updateData.name && auth.currentUser) {\n      await updateProfile(auth.currentUser, {\n        displayName: updateData.name\n      });\n    }\n    \n    return { success: true };\n  } catch (error) {\n    console.error('Error updating profile:', error);\n    return {\n      success: false,\n      error: getErrorMessage(error.code)\n    };\n  }\n};\n\n// Función para obtener datos del usuario por ID\nexport const getUserData = async (userId) => {\n  try {\n    const userDoc = await getDoc(doc(db, 'users', userId));\n    if (userDoc.exists()) {\n      return {\n        success: true,\n        userData: userDoc.data()\n      };\n    } else {\n      return {\n        success: false,\n        error: 'Usuario no encontrado'\n      };\n    }\n  } catch (error) {\n    console.error('Error getting user data:', error);\n    return {\n      success: false,\n      error: getErrorMessage(error.code)\n    };\n  }\n};\n\n// Función para obtener mensajes de error en español\nconst getErrorMessage = (errorCode) => {\n  const errorMessages = {\n    'auth/user-not-found': 'No se encontró una cuenta con este correo electrónico',\n    'auth/wrong-password': 'Contraseña incorrecta',\n    'auth/email-already-in-use': 'Ya existe una cuenta con este correo electrónico',\n    'auth/weak-password': 'La contraseña debe tener al menos 6 caracteres',\n    'auth/invalid-email': 'Correo electrónico inválido',\n    'auth/user-disabled': 'Esta cuenta ha sido deshabilitada',\n    'auth/too-many-requests': 'Demasiados intentos fallidos. Intenta más tarde',\n    'auth/network-request-failed': 'Error de conexión. Verifica tu internet',\n    'auth/invalid-credential': 'Credenciales inválidas'\n  };\n  \n  return errorMessages[errorCode] || 'Ha ocurrido un error inesperado';\n};\n\n// Función para validar email\nexport const validateEmail = (email) => {\n  const emailRegex = /^[^\\s@]+@[^\\s@]+\\.[^\\s@]+$/;\n  return emailRegex.test(email);\n};\n\n// Función para validar contraseña\nexport const validatePassword = (password) => {\n  return password.length >= 6;\n};\n\n// Función para validar teléfono cubano\nexport const validateCubanPhone = (phone) => {\n  const cubanPhoneRegex = /^(\\+53)?[5-8]\\d{7}$/;\n  return cubanPhoneRegex.test(phone.replace(/\\s/g, ''));\n};"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}